<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>What is going on with crime in Phoenix?</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Open Criminology Phoenix (OCP)</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About OCP</a>
</li>
<li>
  <a href="intro.html">Intro to OCP</a>
</li>
<li>
  <a href="crime.html">Crime in Phoenix</a>
</li>
<li>
  <a href="police.html">Policing in Phoenix</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">What is going on with crime in
Phoenix?</h1>
<h4 class="date">14 February, 2025</h4>

</div>


<p><br></p>
<p>If we want to know what is going on with crime in Phoenix, we can
take a look at the <a
href="https://www.phoenixopendata.com/dataset/crime-data">Crime Data</a>
from the <a href="https://www.phoenixopendata.com/">data portal</a>.
This file contains incidents reported to the Phoenix Police Department.
The city updates the file at 11am every day and it contains data
beginning November 2015 up to 7 days before the posting date. With these
data we can examine basic trends in crime in Phoenix.</p>
<p>This page will focus on the following questions:</p>
<ul>
<li>What is the daily trend in crime?</li>
<li>What is the monthly trend in crime?</li>
<li>What is the yearly trend in crime?</li>
<li>What is the monthly and yearly trends in types of crime?</li>
</ul>
<p>To examine these questions, we will use data that has pre-processed
from the <a href="https://www.phoenixopendata.com/">data portal</a>. For
details, see the <a
href="https://jacobtnyoung.github.io/OpenCrimPhx/crime-preprocessing.html">Pre-Processing
Crime Data for Phoenix</a> page.</p>
<p><br><br></p>
<div id="setup" class="section level2">
<h2>Setup</h2>
<p>To get going, we will load all the libraries we need. The code to
generate everything you see here is hidden (to reduce clutter). But, if
you want to see “how we get there”, just click the “Show” button on the
right.</p>
<p>Next, we will load the data. These files are available in the <a
href="https://jacobtnyoung.github.io/OpenCrimPhx/data/data">data</a>
folder for the repository.</p>
<pre class="r"><code># clear workspace
rm( list = ls() )

# load libraries
library( dplyr )    # used for wrangling the data
library( tidyr )    # used for wrangling the data
library( ggplot2 )  # for plotting
library( scales )   # for formatting the text
library( forecast ) # for working with time series data
library( here )     # for referencing the local directory
library( viridis )  # for some coloring used in the plots
 

# define the objects
crimeData       &lt;- readRDS( here( &quot;data/crimeData.rds&quot; ) )
crimesByDay     &lt;- readRDS( here( &quot;data/crimesByDay.rds&quot; ) )
crimesByMonth   &lt;- readRDS( here( &quot;data/crimesByMonth.rds&quot; ) )
crimesByYear    &lt;- readRDS( here( &quot;data/crimesByYear.rds&quot; ) )
crimeRatesMonth &lt;- readRDS( here( &quot;data/crimeRatesMonth.rds&quot; ) )
crimeRatesYear  &lt;- readRDS( here( &quot;data/crimeRatesYear.rds&quot; ) )

crimeRatesMonthType  &lt;- readRDS( here( &quot;data/crimeRatesMonthType.rds&quot; ) )</code></pre>
<p><br></p>
<div id="daily-trends-in-crime-from-2016-to-present"
class="section level3">
<h3>Daily Trends in Crime from 2016 to Present</h3>
<p><br></p>
<p>Let’s pull the most recent data for <strong>crime incidents</strong>
from the site.</p>
<p>The data are reported as UCR crime classifications and have
geographic information (block address, zip) as well as the date and time
of the incident. As of February, 2025, there were 567,280 crime
incidents with complete data from 11/2015 to within a week of the
current date.</p>
<p>Let’s start by looking at the daily counts of crime from when the
data are first available (i.e. November 2015) and look at the trend up
to the current date. In the analyses below, we will drop the most recent
month as the data are not complete for that month.</p>
<p><br></p>
<pre class="r"><code>crimesByDay %&gt;% 
  ggplot( aes( days, counts ) ) +
  geom_line( color = &quot;grey80&quot; ) +
  geom_point( alpha = 1/5, color = &quot;black&quot; ) +
  labs( x = &quot;&quot;, y = &quot;Counts of Crime per Day&quot; ) + 
  ggtitle( &quot;Daily Crime Counts in Phoenix, AZ&quot; ) +
  geom_smooth( color = &quot;#751913&quot;, span = 0.2 ) +
  scale_y_continuous( label = comma ) +
  theme_minimal() </code></pre>
<p><img src="crime-trends_files/figure-html/unnamed-chunk-2-1.png" width="1152" /></p>
<p><br></p>
</div>
<div id="rates-of-crime" class="section level3">
<h3>Rates of Crime</h3>
<p><br></p>
<p>The daily count view is useful, but it might help if we make two
changes:</p>
<ul>
<li><p>First, we should break it down by year and month. This adjustment
corrects for the seasonality of crime. One way to show this seasonal
variation in crime incidents is to plot the monthly incidents for each
year. Note that for 2025, the line stops the month before February, as
that is the last month of complete data from the portal.</p></li>
<li><p>Second, we should adjust the counts to be <em>rates</em> of
incidents of crime. This will adjust for differences in the population
of Phoenix from 2016-2025. The crime incident rate is calculated as the
count of crimes divided by the population size, then multiplied by
100,000. This then tells us how many incidents of crime occur per
100,000 people in the population. The <a
href="https://jacobtnyoung.github.io/OpenCrimPhx/crime-preprocessing.html">Pre-Processing
Crime Data for Phoenix</a> page goes into detail on how these rates are
calculated.</p></li>
</ul>
<p><br></p>
<div id="rates-of-crime-by-month-from-2016-to-present"
class="section level4">
<h4>Rates of Crime by Month from 2016 to Present</h4>
<pre class="r"><code># create a time series object for plotting
monthlyCrimeRateByYear &lt;- ts(
  matrix( as.matrix( crimeRatesMonth ), ncol = 1 ), 
  start=c( 2016, 1 ), 
  end=c( as.numeric( tail( names( crimeRatesMonth ), n=1 ) ), 12 ), frequency=12
)

# render the plot
monthlyCrimeRateByYear %&gt;%
  ggseasonplot(
    year.labels = TRUE,
    continuous = FALSE,
    col = viridis( n = dim(crimeRatesMonth)[2], option = &quot;cividis&quot; ) ) +
  scale_y_continuous( labels = comma ) +
  geom_line( size = 1.5, alpha = 0.7 ) +
  geom_point( size = 2, shape = 21, fill = &quot;white&quot;, color = &quot;black&quot; ) + 
  ggtitle(
    &quot;Monthly Crime Rate Trends in Phoenix, AZ&quot;, 
    subtitle = &quot;Observed seasonal patterns across years&quot; ) +
  theme_minimal()</code></pre>
<p><img src="crime-trends_files/figure-html/unnamed-chunk-3-1.png" width="1152" /></p>
<p><br></p>
<p>The plot showing the monthly rates by year helps us visualize the
data better. Note that the current year, 2025, is missing a label
because the year is incomplete.</p>
<p><br></p>
</div>
<div id="rates-of-crime-by-year-from-2016-to-present"
class="section level4">
<h4>Rates of Crime by Year from 2016 to Present</h4>
<p><br></p>
<pre class="r"><code>crimeRatesYear %&gt;%
  # drop the current year because it distorts the graph
  filter( year != as.numeric( format( Sys.Date(), format=&quot;%Y&quot; ) ) ) %&gt;%
  ggplot( aes( year, rates, group = 1 ) ) +
  geom_line( color = &quot;grey40&quot;, size = 1.2 ) +
  geom_point( color = &quot;firebrick&quot;, size = 4 ) +
  labs( x = &quot;&quot;, y = &quot;Rate of Crime per Year&quot; ) + 
  ggtitle( &quot;Plot of Crime Rate by Year in Phoenix, AZ&quot; , 
           subtitle = &quot;Observed yearly rates across years&quot; ) +
  scale_y_continuous( label = comma ) +
  theme_minimal() </code></pre>
<p><img src="crime-trends_files/figure-html/unnamed-chunk-4-1.png" width="1152" /></p>
<p><br></p>
</div>
<div
id="rates-of-crime-by-year-from-2016-to-present-with-predicted-trend"
class="section level4">
<h4>Rates of Crime by Year from 2016 to Present with Predicted
Trend</h4>
<pre class="r"><code># Fit an ARIMA model with seasonal components
fit &lt;- auto.arima( 
  monthlyCrimeRateByYear, 
  seasonal = TRUE, 
  stepwise = FALSE, 
  approximation = FALSE 
  )

# Forecast the next 12 months
forecasted_values &lt;- forecast( fit, h = 12 )

# Convert time series to a data frame for ggplot
actual_data &lt;- data.frame(
  ds = time( monthlyCrimeRateByYear ),
  y = as.numeric( monthlyCrimeRateByYear )
)
forecast_data &lt;- data.frame(
  ds = time( forecasted_values$mean ),
  yhat = as.numeric( forecasted_values$mean ),
  lower = as.numeric( forecasted_values$lower[,2] ),
  upper = as.numeric( forecasted_values$upper[,2] )
)

# Plot the actual data and forecast using ggplot2
ggplot() +
  geom_line( data = actual_data, aes(x = ds, y = y), color = &quot;grey40&quot;) +  # Actual data
  geom_line( data = forecast_data, aes(x = ds, y = yhat), color = &quot;#c41104&quot;, linetype = &quot;dashed&quot;) +  # Forecasted data
  geom_ribbon(data = forecast_data, aes(x = ds, ymin = lower, ymax = upper), alpha = 0.2) +  # Confidence interval
  labs( title = &quot;Plot of Monthly Crime Rate by Years for Phoenix, AZ with Predicted Trend&quot;,
       x = &quot;Date&quot;,
       y = &quot;Crime Count&quot; ) +
  theme_minimal()</code></pre>
<p><img src="crime-trends_files/figure-html/unnamed-chunk-5-1.png" width="1152" /></p>
<p><br></p>
<hr />
<p><br></p>
</div>
</div>
</div>
<div id="types-of-crime" class="section level2">
<h2>Types of Crime</h2>
<p><br></p>
<div id="rates-of-crime-by-type-of-crime-and-month-from-2016-to-present"
class="section level3">
<h3>Rates of Crime by Type of Crime and Month from 2016 to Present</h3>
<p><br></p>
<pre class="r"><code>crimeRatesMonthType %&gt;% 
  ggplot( aes( month, rates, group = 1 ) ) +
  geom_line( color = &quot;grey40&quot; ) +
  geom_point( alpha = 2/5, color = &quot;#751913&quot; ) +
  facet_grid( crime.type ~ year, scales=&quot;free&quot; ) +
  theme( axis.text.x=element_blank(), 
         strip.text.x = element_text( size = 15 ),
         strip.text.y = element_text( size = 12 ) ) +
  xlab( &quot;Month&quot; )</code></pre>
<p><img src="crime-trends_files/figure-html/unnamed-chunk-6-1.png" width="1152" /></p>
<p><br></p>
<hr />
<p align="center">
<a href="https://jacobtnyoung.github.io/OpenCrimPhx/">Back to Open
Criminology Phoenix page</a>
</p>
<p><br></p>
<p><strong><em>Please</em></strong> report any needed corrections to the
<a
href="https://github.com/jacobtnyoung/OpenCrimPhx/issues/new">Issues</a>
page. Thanks!</p>
<p><br><br></p>
<div id="last-updated-14-february-2025" class="section level6">
<h6><strong><em>Last updated 14 February, 2025</em></strong></h6>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
